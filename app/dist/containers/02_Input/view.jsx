import React from 'react';
export default class Input extends React.Component {
  constructor(props, context) {
    super(props, context);
    /**
     * 設定 state 預設值
     * The ES5 way
     * getInitialState: function() {
     *   return {
     *      name: null
     *   };
     * }
     */
    this.state = {
      name: 'kk'
    };
  }

  changeHandler = () => {
    /**
     * setState 可以變更 state 內容
     * 要注意的是：變更 state 會讓畫面重新渲染(會執行render)
     */
    this.setState({ name: this.refs.name.value });
    /**
     * 使用屬性 refs 可取得元件內容
     * this.refs.XXX  => XXX 則是 element 屬性 ref 定義的內容
     */
  };

  /* 
    (function changeHandler(){}).bind(this)
    */

  render() {
    /* 取得 state.name */
    console.log(this);
    console.log(this.refs.name);
    const { name } = this.state;
    // const name = this.state.name;
    /**
     * 賦予元件屬性 ref 可在類別中使用 this.refs.XXX 取得元件內容
     *
     * JSX 中可兼容許多 html tag 的屬性，但是由兩個單字組成的需要使用駝峰式名稱
     * 像是 : readOnly, onClick, onChange ... 等
     */
    return (
      <div>
        Who are you?
        <input
          ref="name"
          placeholder="input your name..."
          onChange={this.changeHandler}
        />
        <SayHello name={name} test="kk" />
      </div>
    );
  }
}
/**
 * 在畫面中添加另一個 Component，只需像使用 Tag 的方式即可
 * 傳值方式則像添加屬性值：<SayHello name={name}/>
 * 上述的意思為：將 name 透過 props 的方式傳給 Component.SayHello
 */
export class SayHello extends React.Component {
  constructor(props, context) {
    super(props, context);
    /**
     * 由 Input 傳過來的 name 可在此接收 : props.name
     */
  }

  render() {
    /**
     * 或直接在渲染時取出 props 值
     */
    console.log(this);
    const { name, test } = this.props;
    return (
      <div>
        Hello ! {name},i am {test}
      </div>
    );
  }
}
